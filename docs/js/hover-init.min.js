const THREE=window.THREE,gsap=window.gsap,hoverEffect=window.hoverEffect;window.addEventListener("load",()=>{const t=!localStorage.getItem("hoverEffectInitialized"),n=performance.getEntriesByType("navigation")[0]?.type||"navigate",s=location.pathname==="/",o=t&&s&&n==="navigate"?9e3:100;setTimeout(()=>{if(!window.hoverEffect){console.warn("⚠️ hoverEffect tidak tersedia. Gambar tampil apa adanya tanpa efek.");return}document.querySelectorAll(".divDistortion").forEach(t=>{e(t,.3,"/images/distortion/ramen.jpg")}),document.querySelectorAll(".divDistortion2").forEach(t=>{e(t,.3,"/images/distortion/heightMap.png")}),localStorage.setItem("hoverEffectInitialized","true")},o);function e(e,t,n){const a=e.dataset.image1||e.querySelector(".image1")?.src;let i=e.dataset.image2||e.querySelector(".image2")?.src;if(!a){console.warn("⚠️ Tidak ada image1 di elemen:",e);return}(!i||i==="")&&(i=a,console.log("🌀 Hanya satu gambar tersedia → image2 diisi dari image1:",i));const s=new Image,o=new Image;s.src=a,o.src=i;let r=!1,c=!1;const l=()=>{if(r&&c){if(!s.complete||!o.complete){console.warn("⚠️ Salah satu gambar gagal dimuat. Dibiarkan tampil normal tanpa efek:",e);return}const i=s.naturalHeight/s.naturalWidth;setTimeout(()=>{try{new hoverEffect({parent:e,angle:Math.PI/4,intensity1:t,intensity2:t,image1:s.src,image2:o.src,displacementImage:n,imagesRatio:i,speedIn:1,speedOut:1}),setTimeout(()=>{e.querySelectorAll(".image1, .image2").forEach(e=>{e.classList.add("lg:w-[0.1px]","lg:h-[0.1px]","pointer-events-none")})},500),localStorage.removeItem("hoverReloaded"),console.log("✅ Hover effect diterapkan:",e)}catch(e){console.warn("❌ hoverEffect gagal:",e)}},0)}};s.onload=()=>{r=!0,l()},s.onerror=()=>d(s,e,".image1"),o.onload=()=>{c=!0,l()},o.onerror=()=>d(o,e,".image2");function d(e,t,n){console.warn(`⚠️ Gagal load (${e.src}) → gambar asli tetap dipakai. Tidak diubah ke default.`),n.includes("1")&&(r=!0),n.includes("2")&&(c=!0),l()}}})